# JVM
```JAVA {
public class JvmComprehension {                                      - Подготовка к исполнению:
                                                                     - JVM дает ClassLoader команду на "ленивую" загрузку классов (имя-методы-поля-константы) из
                                                                       Bytecod программы в область памяти (Metaspace)
                                                                     - Application Classloader загружает класс JvmComprehension
                                                                     - Platform Classloader классы, связанные с платформой на котороой запущена JVM
                                                                     - Bootstrap Classloader загружает базовые классы Java 
                                                                     - Происходит связывание классов (проверка кода на валидность, подготовка статическмх 
                                                                       примитивов, связывание ссылок на другие классы с их загрузкой при необходимости)
                                                                     - Инициализация статических полей и инициализаторов (выполнение JVM файлов .class) 
                                                                          
    public static void main(String[] args) {                         - в стек помещается информация о новом фрейме, соответствующем методу main
        int i = 1;                      // 1                         - в стек помещается информация о значении переменной i=1
        Object o = new Object();        // 2                         - в хипе создается объект Object, в стеке создана переменная о, ссылающаяся на объект в хипе
        Integer ii = 2;                 // 3                         - в хипе создается объект Integer, в стеке создана переменная ii, ссылающаяся на объект в хипе
        printAll(o, i, ii);             // 4                         - в стек помещается информация о новом фрейме, соответствующем методу printAll и ссылки на его
                                                                       аргументы o, i, ii 
        System.out.println("finished"); // 7                         - в стек помещается информация о новом фрейме, соответствующем методу System.out.printlnl и
                                                                       ссылки на его статический аргумент из Metaspace
        
    }

    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5            - в хипе создается объект Integer, в стеке создана переменная uselessVar, ссылающаяся на него
        System.out.println(o.toString() + i + ii);  // 6            - в стек помещается информация о новом фрейме, соответствующем методу System.out.printlnl и
                                                                      ссылки на объект в хипе, порожденный методом o.toString() и ссылки на i и ii
    }                                                                 По выходу из вызванных методов созданные ими объекты в куче удаляются, указатель стек
                                                                      сдвигается вниз. При запуске сборщика мусора размер используемого хипа уменьшается.
}
```
